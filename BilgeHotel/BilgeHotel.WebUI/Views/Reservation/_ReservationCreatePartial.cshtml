@model ReservationCreateVM
@using BilgeHotel.Core.MyTools.Concrete
@{
    int? roomId = ViewData["RoomId"] as int?;


    List<DateTime> ReservationDates = TempData["ReservationGetir"] as List<DateTime>;
    Layout = null;


}


<div class="col-lg-12">
    <div class="row">
        <div class="col-lg-6 mt-md-5">
            @* BURADA KALDIM *@

            <h2>Rezervasyon Seçenekleri</h2>

            <div class="row border-top mt-5">
                <div class="col-12">
                    <h3 class="text-success">Giriş Tarihi</h3>
                    <select id="checkIn_@roomId" class="form-control mt-2 dropdown">
                        @foreach (var item in ReservationDates)
                        {
                            <option>@item</option>
                        }
                    </select>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col-12">
                    <h3 class="text-success">Çıkış Tarihi</h3>
                    <select id="checkOut_@roomId" class="dropdown form-control">
                    </select>
                </div>
            </div>

        </div>
        <div class="col-lg-6 mt-md-5">
            <h2>Sign Up</h2>
            <div class="row mt-5 border-top">
                <div class="col-12">
                    <form asp-controller="Reservation" asp-action="_ReservationCreatePartial">
                        <label class="text-success" asp-for="Customer.FirstName"></label>
                        <input type="text" asp-for="Customer.FirstName" class="form-control" />
                        <label class="text-success" asp-for="Customer.LastName"></label>
                        <input type="text" asp-for="Customer.LastName" class="form-control" />
                        <label class="text-success" asp-for="Customer.Phone"></label>
                        <input type="text" asp-for="Customer.Phone" class="form-control" />
                        <label class="text-success" asp-for="Customer.Email"></label>
                        <input type="email" asp-for="Customer.Email" class="form-control" />
                        <label class="text-success" asp-for="Customer.TcIdentityNo"></label>
                        <input type="number" asp-for="Customer.TcIdentityNo" class="form-control" />
                        <label class="text-success" asp-for="Customer.BirthDate"></label>
                        <input type="datetime" asp-for="Customer.BirthDate" class="form-control" />
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-2">
        <div class="col-12">
            <button class="btn btn-primary float-right">Rezervasyon Yap</button>
        </div>
    </div>
</div>
<script src="~/jquery/jquery.js"></script>
<script src="~/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.js"></script>
<script>

    $(document).ready(function () {

        $("#checkIn_@roomId").change(function () {


            var currentDate = $("#checkIn_@roomId").children(":selected").val().toString()
            var a = currentDate.replace(" ", ".")
            var b = a.replace(":", ".")
            var c = b.replace(":", ".")
            var ayristir = c.split(".")

            var day = ayristir[0]
            var month = ayristir[1]
            var year = ayristir[2]
            var hour = ayristir[3]
            var minute = ayristir[4]
            var second = ayristir[5]

           $.ajax({
             type: "Get",
               url: "/Reservation/GetOutDate/",
               dataType: "json",
               data: {
                   Year: year,
                   Month: month,
                   Day: day,
                   Hour: hour,
                   Minute: minute,
                   Second: second
               },
               success: function (data) {
                   $.each(data, function (index, item) {

                     $("#checkOut_" +@roomId).append(`<option value="${item}">
                                       ${item}
                                  </option>`);

            });


              }
           })








        })

   })


</script>